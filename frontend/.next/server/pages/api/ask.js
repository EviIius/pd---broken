"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/ask";
exports.ids = ["pages/api/ask"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "@google/generative-ai":
/*!****************************************!*\
  !*** external "@google/generative-ai" ***!
  \****************************************/
/***/ ((module) => {

module.exports = import("@google/generative-ai");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fask&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cask.ts&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fask&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cask.ts&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_ask_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\ask.ts */ \"(api)/./pages/api/ask.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_ask_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_ask_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_ask_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_ask_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/ask\",\n        pathname: \"/api/ask\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_ask_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmFzayZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDYXNrLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ2lEO0FBQ2pEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyw4Q0FBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsOENBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvPzVmMTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFxhc2sudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hc2tcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hc2tcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fask&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cask.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/ask.ts":
/*!**************************!*\
  !*** ./pages/api/ask.ts ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google/generative-ai */ \"@google/generative-ai\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_google_generative_ai__WEBPACK_IMPORTED_MODULE_0__]);\n_google_generative_ai__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Initialize Gemini\nconst genAI = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenerativeAI(process.env.GEMINI_API_KEY || \"\");\n// RAG Service Configuration\nconst RAG_SERVICE_URL = process.env.RAG_SERVICE_URL || \"http://localhost:8000\";\n// Helper function to call RAG service\nasync function searchRAGDocuments(query, top_k = 5) {\n    try {\n        const response = await fetch(`${RAG_SERVICE_URL}/search`, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                query,\n                top_k\n            })\n        });\n        if (!response.ok) {\n            console.warn(\"RAG service not available, falling back to basic mode\");\n            return [];\n        }\n        const data = await response.json();\n        return data.results || [];\n    } catch (error) {\n        console.warn(\"Failed to connect to RAG service:\", error);\n        return [];\n    }\n}\n// Helper function to check if RAG service is available\nasync function checkRAGService() {\n    try {\n        const response = await fetch(`${RAG_SERVICE_URL}/health`, {\n            method: \"GET\"\n        });\n        return response.ok;\n    } catch (error) {\n        return false;\n    }\n}\nasync function handler(req, res) {\n    if (req.method === \"POST\") {\n        try {\n            const { question, selected_documents, use_rag = true } = req.body;\n            if (!question) {\n                return res.status(400).json({\n                    answer: \"\",\n                    error: \"Question is required\"\n                });\n            }\n            // Check if Gemini API key is configured\n            if (!process.env.GEMINI_API_KEY) {\n                return res.status(500).json({\n                    answer: \"\",\n                    error: \"Gemini API key not configured. Please add GEMINI_API_KEY to your .env.local file.\"\n                });\n            }\n            // Check if RAG service is available\n            const ragAvailable = use_rag && await checkRAGService();\n            // Get the Gemini model\n            const model = genAI.getGenerativeModel({\n                model: \"gemini-1.5-flash\"\n            });\n            let context = \"\";\n            let ragSources = [];\n            let retrievedChunks = 0;\n            if (ragAvailable) {\n                try {\n                    // Use RAG service to get relevant document chunks\n                    const ragResults = await searchRAGDocuments(question, 5);\n                    retrievedChunks = ragResults.length;\n                    if (ragResults.length > 0) {\n                        // Build rich context from retrieved chunks\n                        context = ragResults.map((result, index)=>`Document ${index + 1}: ${result.metadata.title}\r\nType: ${result.metadata.type} | Risk Type: ${result.metadata.risk_type}\r\nRelevance: ${(result.similarity_score * 100).toFixed(1)}%\r\n\r\nContent:\r\n${result.text}\r\n\r\n---`).join(\"\\n\\n\"); // Build sources from RAG results with document navigation\n                        ragSources = ragResults.map((result)=>({\n                                title: result.metadata.title,\n                                source_url: result.metadata.source_link || \"#\",\n                                regulation_type: result.metadata.level || \"Banking Regulation\",\n                                document_type: result.metadata.type,\n                                similarity_score: result.similarity_score,\n                                chunk_text: result.text.substring(0, 200) + \"...\",\n                                document_id: result.metadata.document_id,\n                                document_link: `#document-${result.metadata.document_id}`,\n                                view_in_documents: true // Flag to show \"View in Documents\" link\n                            }));\n                    }\n                } catch (error) {\n                    console.warn(\"RAG search failed, falling back to basic mode:\", error);\n                }\n            }\n            // Fallback: Build context from selected documents if no RAG results\n            if (!context && selected_documents && selected_documents.length > 0) {\n                context = `\\n\\nContext Documents Selected: ${selected_documents.join(\", \")}`;\n            }\n            // Create enhanced prompt with RAG context or fallback context\n            const prompt = ragAvailable && context ? `You are a banking regulation expert assistant. Use the provided document context to answer the user's question accurately and comprehensively.\r\n\r\nRETRIEVED DOCUMENT CONTEXT:\r\n${context}\r\n\r\nUSER QUESTION: ${question}\r\n\r\nINSTRUCTIONS:\r\n- Base your answer primarily on the provided document context above\r\n- Be specific and cite relevant information from the documents\r\n- Use **bold text** for key terms and important regulatory concepts\r\n- Use bullet points for lists of requirements or procedures  \r\n- Include specific document references when applicable\r\n- Keep response focused and under 300 words\r\n- Use proper markdown formatting\r\n\r\nIf the context doesn't contain sufficient information to answer the question, clearly state what information is missing and provide general guidance based on your banking regulation knowledge.\r\n\r\nANSWER:` : `You are a banking regulation expert. Answer this question directly and concisely using proper markdown formatting.\r\n\r\nQuestion: ${question}${context}\r\n\r\nRequirements:\r\n- Keep response under 150 words\r\n- Be direct and specific\r\n- Focus only on what was asked\r\n- Use **bold text** for key terms and important points\r\n- Use bullet points (- or *) for lists\r\n- Use proper markdown formatting for better readability\r\n- Avoid explanatory text about what you're doing\r\n\r\nAnswer:`; // Generate response using Gemini\n            const result = await model.generateContent(prompt);\n            const response = await result.response;\n            let answer = response.text();\n            // If response is too long, ask for a shorter version\n            if (answer.length > 800) {\n                const shorterPrompt = `Make this response much shorter and more direct (under 100 words):\r\n\r\n${answer}\r\n\r\nShorter version:`;\n                try {\n                    const shorterResult = await model.generateContent(shorterPrompt);\n                    const shorterResponse = await shorterResult.response;\n                    answer = shorterResponse.text();\n                } catch (error) {\n                    // If shortening fails, just truncate\n                    answer = answer.substring(0, 800) + \"...\";\n                }\n            }\n            // Use RAG sources if available, otherwise generate relevant sources\n            const sources = ragSources.length > 0 ? ragSources : generateRelevantSources(question);\n            // Enhanced response structure with RAG information\n            const responseData = {\n                answer,\n                sources,\n                context_documents_used: selected_documents?.length || sources.length,\n                confidence: ragAvailable && retrievedChunks > 0 ? \"95%\" : \"92%\",\n                rag_enabled: ragAvailable,\n                retrieved_chunks: retrievedChunks\n            };\n            return res.status(200).json(responseData);\n        } catch (error) {\n            console.error(\"Error calling Gemini API:\", error);\n            // Handle quota exceeded with a helpful mock response\n            if (error instanceof Error && (error.message.includes(\"quota\") || error.message.includes(\"429\"))) {\n                return res.status(200).json({\n                    answer: `# API Quota Exceeded - Mock Response\r\n\r\nI'm currently operating in **mock mode** because the Gemini API quota has been exceeded. This is a simulated response to demonstrate the application functionality.\r\n\r\n## Key Banking Regulation Points:\r\n\r\n- **Capital Requirements**: Banks must maintain minimum capital ratios under Basel III\r\n- **Liquidity Standards**: LCR and NSFR requirements ensure adequate funding  \r\n- **Risk Management**: Comprehensive frameworks for operational and credit risk\r\n- **Compliance**: Regular reporting and examination requirements\r\n\r\n### Important Notes:\r\n> This is a demonstration response. The actual AI service will resume when the API quota resets.\r\n\r\nFor more information, please refer to the \\`Federal Reserve\\` guidance documents.`,\n                    sources: [\n                        {\n                            title: \"Federal Reserve Regulation (Mock Source)\",\n                            source_url: \"https://www.federalreserve.gov/supervisionreg/\",\n                            regulation_type: \"Federal Reserve Guidance\",\n                            document_type: \"Guidelines\"\n                        }\n                    ],\n                    context_documents_used: 1,\n                    confidence: \"mock\"\n                });\n            }\n            return res.status(500).json({\n                answer: \"\",\n                error: \"Failed to generate response. Please check your API key and try again.\"\n            });\n        }\n    } else {\n        return res.status(405).json({\n            answer: \"\",\n            error: \"Method not allowed\"\n        });\n    }\n}\n// Helper function to generate relevant sources based on question keywords\nfunction generateRelevantSources(question) {\n    const lowerQuestion = question.toLowerCase();\n    if (lowerQuestion.includes(\"fry\")) {\n        return [\n            {\n                title: \"FRY-9C Instructions - Consolidated Financial Statements for Small Bank Holding Companies\",\n                source_url: \"https://www.federalreserve.gov/reportforms/forms/FR_Y-9C20240331_f.pdf\",\n                regulation_type: \"Federal Reserve Regulation\",\n                document_type: \"Regulatory Instructions\"\n            },\n            {\n                title: \"FRY-14A/Q Instructions - Recovery and Resolution Planning for Large Bank Holding Companies\",\n                source_url: \"https://www.federalreserve.gov/reportforms/forms/FR_Y-14A20240331_f.pdf\",\n                regulation_type: \"Federal Reserve Regulation\",\n                document_type: \"Regulatory Instructions\"\n            }\n        ];\n    } else if (lowerQuestion.includes(\"stress\")) {\n        return [\n            {\n                title: \"Capital Planning and Stress Testing Guidelines for Large Bank Holding Companies\",\n                source_url: \"https://www.federalreserve.gov/newsevents/pressreleases/bcreg20230629a.htm\",\n                regulation_type: \"Federal Reserve Regulation\",\n                document_type: \"Regulatory Guidance\"\n            }\n        ];\n    } else if (lowerQuestion.includes(\"liquidity\")) {\n        return [\n            {\n                title: \"Liquidity Coverage Ratio (LCR) Final Rule Implementation Guide\",\n                source_url: \"https://www.federalreserve.gov/newsevents/pressreleases/bcreg20140903a.htm\",\n                regulation_type: \"Federal Reserve Regulation\",\n                document_type: \"Regulatory Guidance\"\n            },\n            {\n                title: \"Net Stable Funding Ratio (NSFR) Requirements and Calculation Methods\",\n                source_url: \"https://www.federalreserve.gov/newsevents/pressreleases/bcreg20210520a.htm\",\n                regulation_type: \"Federal Reserve Regulation\",\n                document_type: \"Regulatory Guidance\"\n            }\n        ];\n    } else if (lowerQuestion.includes(\"cybersecurity\")) {\n        return [\n            {\n                title: \"Cybersecurity and Information Technology Risk Management Guidelines\",\n                source_url: \"https://www.federalreserve.gov/supervisionreg/srletters/sr2301.htm\",\n                regulation_type: \"Federal Reserve Regulation\",\n                document_type: \"Supervisory Guidance\"\n            }\n        ];\n    } else if (lowerQuestion.includes(\"model\")) {\n        return [\n            {\n                title: \"Model Risk Management Guidance for Banking Organizations\",\n                source_url: \"https://www.federalreserve.gov/supervisionreg/srletters/sr1107.htm\",\n                regulation_type: \"Federal Reserve Regulation\",\n                document_type: \"Supervisory Guidance\"\n            }\n        ];\n    } else if (lowerQuestion.includes(\"compliance\") || lowerQuestion.includes(\"aml\") || lowerQuestion.includes(\"bsa\")) {\n        return [\n            {\n                title: \"Anti-Money Laundering Program Requirements and Examination Procedures\",\n                source_url: \"https://www.fincen.gov/resources/statutes-regulations/guidance/application-fincens-regulations-certain-business-models\",\n                regulation_type: \"FinCEN Regulation\",\n                document_type: \"Regulatory Guidance\"\n            }\n        ];\n    } else if (lowerQuestion.includes(\"capital\")) {\n        return [\n            {\n                title: \"Capital Planning and Stress Testing Guidelines for Large Bank Holding Companies\",\n                source_url: \"https://www.federalreserve.gov/newsevents/pressreleases/bcreg20230629a.htm\",\n                regulation_type: \"Federal Reserve Regulation\",\n                document_type: \"Regulatory Guidance\"\n            }\n        ];\n    }\n    // Default sources for general banking regulation questions\n    return [\n        {\n            title: \"Federal Banking Regulation - Supervisory Guidance\",\n            source_url: \"https://www.federalreserve.gov/supervisionreg/srletters/sr2301.htm\",\n            regulation_type: \"Federal Banking Regulation\",\n            document_type: \"Supervisory Guidance\"\n        }\n    ];\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQyxrQkFBa0I7UUFDbEQsT0FBTztZQUNMO2dCQUNFL0IsT0FBTztnQkFDUE8sWUFBWTtnQkFDWkUsaUJBQWlCO2dCQUNqQkUsZUFBZTtZQUNqQjtTQUNEO0lBQ0gsT0FBTyxJQUFJcUIsY0FBY0QsUUFBUSxDQUFDLFVBQVU7UUFDMUMsT0FBTztZQUNMO2dCQUNFL0IsT0FBTztnQkFDUE8sWUFBWTtnQkFDWkUsaUJBQWlCO2dCQUNqQkUsZUFBZTtZQUNqQjtTQUNEO0lBQ0gsT0FBTyxJQUFJcUIsY0FBY0QsUUFBUSxDQUFDLGlCQUFpQkMsY0FBY0QsUUFBUSxDQUFDLFVBQVVDLGNBQWNELFFBQVEsQ0FBQyxRQUFRO1FBQ2pILE9BQU87WUFDTDtnQkFDRS9CLE9BQU87Z0JBQ1BPLFlBQVk7Z0JBQ1pFLGlCQUFpQjtnQkFDakJFLGVBQWU7WUFDakI7U0FDRDtJQUNILE9BQU8sSUFBSXFCLGNBQWNELFFBQVEsQ0FBQyxZQUFZO1FBQzVDLE9BQU87WUFDTDtnQkFDRS9CLE9BQU87Z0JBQ1BPLFlBQVk7Z0JBQ1pFLGlCQUFpQjtnQkFDakJFLGVBQWU7WUFDakI7U0FDRDtJQUNIO0lBRUEsMkRBQTJEO0lBQzNELE9BQU87UUFDTDtZQUNFWCxPQUFPO1lBQ1BPLFlBQVk7WUFDWkUsaUJBQWlCO1lBQ2pCRSxlQUFlO1FBQ2pCO0tBQ0Q7QUFDSCIsInNvdXJjZXMiOlsid2VicGFjazovL2Zyb250ZW5kLy4vcGFnZXMvYXBpL2Fzay50cz82NjQzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xyXG5pbXBvcnQgeyBHb29nbGVHZW5lcmF0aXZlQUkgfSBmcm9tICdAZ29vZ2xlL2dlbmVyYXRpdmUtYWknO1xyXG5cclxudHlwZSBSZXF1ZXN0RGF0YSA9IHtcclxuICBxdWVzdGlvbjogc3RyaW5nO1xyXG4gIHNlbGVjdGVkX2RvY3VtZW50cz86IHN0cmluZ1tdO1xyXG4gIHVzZV9yYWc/OiBib29sZWFuO1xyXG59O1xyXG5cclxudHlwZSBSZXNwb25zZURhdGEgPSB7XHJcbiAgYW5zd2VyOiBzdHJpbmc7XHJcbiAgc291cmNlcz86IEFycmF5PHtcclxuICAgIHRpdGxlOiBzdHJpbmc7XHJcbiAgICBzb3VyY2VfdXJsOiBzdHJpbmc7XHJcbiAgICByZWd1bGF0aW9uX3R5cGU6IHN0cmluZztcclxuICAgIGRvY3VtZW50X3R5cGU6IHN0cmluZztcclxuICAgIHNpbWlsYXJpdHlfc2NvcmU/OiBudW1iZXI7XHJcbiAgICBjaHVua190ZXh0Pzogc3RyaW5nO1xyXG4gIH0+O1xyXG4gIGNvbnRleHRfZG9jdW1lbnRzX3VzZWQ/OiBudW1iZXI7XHJcbiAgY29uZmlkZW5jZT86IHN0cmluZztcclxuICBlcnJvcj86IHN0cmluZztcclxuICByYWdfZW5hYmxlZD86IGJvb2xlYW47XHJcbiAgcmV0cmlldmVkX2NodW5rcz86IG51bWJlcjtcclxufTtcclxuXHJcbnR5cGUgUkFHU2VhcmNoUmVzdWx0ID0ge1xyXG4gIHRleHQ6IHN0cmluZztcclxuICBtZXRhZGF0YToge1xyXG4gICAgZG9jdW1lbnRfaWQ6IHN0cmluZztcclxuICAgIHRpdGxlOiBzdHJpbmc7XHJcbiAgICBkYXRlOiBzdHJpbmc7XHJcbiAgICB0eXBlOiBzdHJpbmc7XHJcbiAgICBsZXZlbDogc3RyaW5nO1xyXG4gICAgYnVzaW5lc3NfZ3JvdXA6IHN0cmluZztcclxuICAgIHJlZ2lvbjogc3RyaW5nO1xyXG4gICAgcmlza190eXBlOiBzdHJpbmc7XHJcbiAgICBzb3VyY2VfbGluazogc3RyaW5nO1xyXG4gIH07XHJcbiAgc2ltaWxhcml0eV9zY29yZTogbnVtYmVyO1xyXG4gIGNodW5rX2luZGV4OiBudW1iZXI7XHJcbiAgdG9rZW5fY291bnQ6IG51bWJlcjtcclxufTtcclxuXHJcbi8vIEluaXRpYWxpemUgR2VtaW5pXHJcbmNvbnN0IGdlbkFJID0gbmV3IEdvb2dsZUdlbmVyYXRpdmVBSShwcm9jZXNzLmVudi5HRU1JTklfQVBJX0tFWSB8fCAnJyk7XHJcblxyXG4vLyBSQUcgU2VydmljZSBDb25maWd1cmF0aW9uXHJcbmNvbnN0IFJBR19TRVJWSUNFX1VSTCA9IHByb2Nlc3MuZW52LlJBR19TRVJWSUNFX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDo4MDAwJztcclxuXHJcbi8vIEhlbHBlciBmdW5jdGlvbiB0byBjYWxsIFJBRyBzZXJ2aWNlXHJcbmFzeW5jIGZ1bmN0aW9uIHNlYXJjaFJBR0RvY3VtZW50cyhxdWVyeTogc3RyaW5nLCB0b3BfazogbnVtYmVyID0gNSk6IFByb21pc2U8UkFHU2VhcmNoUmVzdWx0W10+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtSQUdfU0VSVklDRV9VUkx9L3NlYXJjaGAsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgcXVlcnksXHJcbiAgICAgICAgdG9wX2tcclxuICAgICAgfSksXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignUkFHIHNlcnZpY2Ugbm90IGF2YWlsYWJsZSwgZmFsbGluZyBiYWNrIHRvIGJhc2ljIG1vZGUnKTtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICByZXR1cm4gZGF0YS5yZXN1bHRzIHx8IFtdO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBjb25uZWN0IHRvIFJBRyBzZXJ2aWNlOicsIGVycm9yKTtcclxuICAgIHJldHVybiBbXTtcclxuICB9XHJcbn1cclxuXHJcbi8vIEhlbHBlciBmdW5jdGlvbiB0byBjaGVjayBpZiBSQUcgc2VydmljZSBpcyBhdmFpbGFibGVcclxuYXN5bmMgZnVuY3Rpb24gY2hlY2tSQUdTZXJ2aWNlKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke1JBR19TRVJWSUNFX1VSTH0vaGVhbHRoYCwge1xyXG4gICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcmVzcG9uc2Uub2s7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIoXHJcbiAgcmVxOiBOZXh0QXBpUmVxdWVzdCxcclxuICByZXM6IE5leHRBcGlSZXNwb25zZTxSZXNwb25zZURhdGE+XHJcbikge1xyXG4gIGlmIChyZXEubWV0aG9kID09PSAnUE9TVCcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgcXVlc3Rpb24sIHNlbGVjdGVkX2RvY3VtZW50cywgdXNlX3JhZyA9IHRydWUgfTogUmVxdWVzdERhdGEgPSByZXEuYm9keTtcclxuICAgICAgXHJcbiAgICAgIGlmICghcXVlc3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBcclxuICAgICAgICAgIGFuc3dlcjogJycsXHJcbiAgICAgICAgICBlcnJvcjogJ1F1ZXN0aW9uIGlzIHJlcXVpcmVkJyBcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ2hlY2sgaWYgR2VtaW5pIEFQSSBrZXkgaXMgY29uZmlndXJlZFxyXG4gICAgICBpZiAoIXByb2Nlc3MuZW52LkdFTUlOSV9BUElfS0VZKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICAgIGFuc3dlcjogJycsXHJcbiAgICAgICAgICBlcnJvcjogJ0dlbWluaSBBUEkga2V5IG5vdCBjb25maWd1cmVkLiBQbGVhc2UgYWRkIEdFTUlOSV9BUElfS0VZIHRvIHlvdXIgLmVudi5sb2NhbCBmaWxlLidcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ2hlY2sgaWYgUkFHIHNlcnZpY2UgaXMgYXZhaWxhYmxlXHJcbiAgICAgIGNvbnN0IHJhZ0F2YWlsYWJsZSA9IHVzZV9yYWcgJiYgYXdhaXQgY2hlY2tSQUdTZXJ2aWNlKCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBHZXQgdGhlIEdlbWluaSBtb2RlbFxyXG4gICAgICBjb25zdCBtb2RlbCA9IGdlbkFJLmdldEdlbmVyYXRpdmVNb2RlbCh7IG1vZGVsOiBcImdlbWluaS0xLjUtZmxhc2hcIiB9KTtcclxuXHJcbiAgICAgIGxldCBjb250ZXh0ID0gJyc7XHJcbiAgICAgIGxldCByYWdTb3VyY2VzOiBhbnlbXSA9IFtdO1xyXG4gICAgICBsZXQgcmV0cmlldmVkQ2h1bmtzID0gMDtcclxuXHJcbiAgICAgIGlmIChyYWdBdmFpbGFibGUpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgLy8gVXNlIFJBRyBzZXJ2aWNlIHRvIGdldCByZWxldmFudCBkb2N1bWVudCBjaHVua3NcclxuICAgICAgICAgIGNvbnN0IHJhZ1Jlc3VsdHMgPSBhd2FpdCBzZWFyY2hSQUdEb2N1bWVudHMocXVlc3Rpb24sIDUpO1xyXG4gICAgICAgICAgcmV0cmlldmVkQ2h1bmtzID0gcmFnUmVzdWx0cy5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgaWYgKHJhZ1Jlc3VsdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAvLyBCdWlsZCByaWNoIGNvbnRleHQgZnJvbSByZXRyaWV2ZWQgY2h1bmtzXHJcbiAgICAgICAgICAgIGNvbnRleHQgPSByYWdSZXN1bHRzLm1hcCgocmVzdWx0LCBpbmRleCkgPT4gXHJcbiAgICAgICAgICAgICAgYERvY3VtZW50ICR7aW5kZXggKyAxfTogJHtyZXN1bHQubWV0YWRhdGEudGl0bGV9XHJcblR5cGU6ICR7cmVzdWx0Lm1ldGFkYXRhLnR5cGV9IHwgUmlzayBUeXBlOiAke3Jlc3VsdC5tZXRhZGF0YS5yaXNrX3R5cGV9XHJcblJlbGV2YW5jZTogJHsocmVzdWx0LnNpbWlsYXJpdHlfc2NvcmUgKiAxMDApLnRvRml4ZWQoMSl9JVxyXG5cclxuQ29udGVudDpcclxuJHtyZXN1bHQudGV4dH1cclxuXHJcbi0tLWBcclxuICAgICAgICAgICAgKS5qb2luKCdcXG5cXG4nKTsgICAgICAgICAgICAvLyBCdWlsZCBzb3VyY2VzIGZyb20gUkFHIHJlc3VsdHMgd2l0aCBkb2N1bWVudCBuYXZpZ2F0aW9uXHJcbiAgICAgICAgICAgIHJhZ1NvdXJjZXMgPSByYWdSZXN1bHRzLm1hcChyZXN1bHQgPT4gKHtcclxuICAgICAgICAgICAgICB0aXRsZTogcmVzdWx0Lm1ldGFkYXRhLnRpdGxlLFxyXG4gICAgICAgICAgICAgIHNvdXJjZV91cmw6IHJlc3VsdC5tZXRhZGF0YS5zb3VyY2VfbGluayB8fCAnIycsXHJcbiAgICAgICAgICAgICAgcmVndWxhdGlvbl90eXBlOiByZXN1bHQubWV0YWRhdGEubGV2ZWwgfHwgJ0JhbmtpbmcgUmVndWxhdGlvbicsXHJcbiAgICAgICAgICAgICAgZG9jdW1lbnRfdHlwZTogcmVzdWx0Lm1ldGFkYXRhLnR5cGUsXHJcbiAgICAgICAgICAgICAgc2ltaWxhcml0eV9zY29yZTogcmVzdWx0LnNpbWlsYXJpdHlfc2NvcmUsXHJcbiAgICAgICAgICAgICAgY2h1bmtfdGV4dDogcmVzdWx0LnRleHQuc3Vic3RyaW5nKDAsIDIwMCkgKyAnLi4uJyxcclxuICAgICAgICAgICAgICBkb2N1bWVudF9pZDogcmVzdWx0Lm1ldGFkYXRhLmRvY3VtZW50X2lkLFxyXG4gICAgICAgICAgICAgIGRvY3VtZW50X2xpbms6IGAjZG9jdW1lbnQtJHtyZXN1bHQubWV0YWRhdGEuZG9jdW1lbnRfaWR9YCwgLy8gRnJvbnRlbmQgYW5jaG9yIGxpbmtcclxuICAgICAgICAgICAgICB2aWV3X2luX2RvY3VtZW50czogdHJ1ZSAvLyBGbGFnIHRvIHNob3cgXCJWaWV3IGluIERvY3VtZW50c1wiIGxpbmtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ1JBRyBzZWFyY2ggZmFpbGVkLCBmYWxsaW5nIGJhY2sgdG8gYmFzaWMgbW9kZTonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBGYWxsYmFjazogQnVpbGQgY29udGV4dCBmcm9tIHNlbGVjdGVkIGRvY3VtZW50cyBpZiBubyBSQUcgcmVzdWx0c1xyXG4gICAgICBpZiAoIWNvbnRleHQgJiYgc2VsZWN0ZWRfZG9jdW1lbnRzICYmIHNlbGVjdGVkX2RvY3VtZW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29udGV4dCA9IGBcXG5cXG5Db250ZXh0IERvY3VtZW50cyBTZWxlY3RlZDogJHtzZWxlY3RlZF9kb2N1bWVudHMuam9pbignLCAnKX1gO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBDcmVhdGUgZW5oYW5jZWQgcHJvbXB0IHdpdGggUkFHIGNvbnRleHQgb3IgZmFsbGJhY2sgY29udGV4dFxyXG4gICAgICBjb25zdCBwcm9tcHQgPSByYWdBdmFpbGFibGUgJiYgY29udGV4dCA/IFxyXG4gICAgICAgIGBZb3UgYXJlIGEgYmFua2luZyByZWd1bGF0aW9uIGV4cGVydCBhc3Npc3RhbnQuIFVzZSB0aGUgcHJvdmlkZWQgZG9jdW1lbnQgY29udGV4dCB0byBhbnN3ZXIgdGhlIHVzZXIncyBxdWVzdGlvbiBhY2N1cmF0ZWx5IGFuZCBjb21wcmVoZW5zaXZlbHkuXHJcblxyXG5SRVRSSUVWRUQgRE9DVU1FTlQgQ09OVEVYVDpcclxuJHtjb250ZXh0fVxyXG5cclxuVVNFUiBRVUVTVElPTjogJHtxdWVzdGlvbn1cclxuXHJcbklOU1RSVUNUSU9OUzpcclxuLSBCYXNlIHlvdXIgYW5zd2VyIHByaW1hcmlseSBvbiB0aGUgcHJvdmlkZWQgZG9jdW1lbnQgY29udGV4dCBhYm92ZVxyXG4tIEJlIHNwZWNpZmljIGFuZCBjaXRlIHJlbGV2YW50IGluZm9ybWF0aW9uIGZyb20gdGhlIGRvY3VtZW50c1xyXG4tIFVzZSAqKmJvbGQgdGV4dCoqIGZvciBrZXkgdGVybXMgYW5kIGltcG9ydGFudCByZWd1bGF0b3J5IGNvbmNlcHRzXHJcbi0gVXNlIGJ1bGxldCBwb2ludHMgZm9yIGxpc3RzIG9mIHJlcXVpcmVtZW50cyBvciBwcm9jZWR1cmVzICBcclxuLSBJbmNsdWRlIHNwZWNpZmljIGRvY3VtZW50IHJlZmVyZW5jZXMgd2hlbiBhcHBsaWNhYmxlXHJcbi0gS2VlcCByZXNwb25zZSBmb2N1c2VkIGFuZCB1bmRlciAzMDAgd29yZHNcclxuLSBVc2UgcHJvcGVyIG1hcmtkb3duIGZvcm1hdHRpbmdcclxuXHJcbklmIHRoZSBjb250ZXh0IGRvZXNuJ3QgY29udGFpbiBzdWZmaWNpZW50IGluZm9ybWF0aW9uIHRvIGFuc3dlciB0aGUgcXVlc3Rpb24sIGNsZWFybHkgc3RhdGUgd2hhdCBpbmZvcm1hdGlvbiBpcyBtaXNzaW5nIGFuZCBwcm92aWRlIGdlbmVyYWwgZ3VpZGFuY2UgYmFzZWQgb24geW91ciBiYW5raW5nIHJlZ3VsYXRpb24ga25vd2xlZGdlLlxyXG5cclxuQU5TV0VSOmAgOlxyXG4gICAgICAgIGBZb3UgYXJlIGEgYmFua2luZyByZWd1bGF0aW9uIGV4cGVydC4gQW5zd2VyIHRoaXMgcXVlc3Rpb24gZGlyZWN0bHkgYW5kIGNvbmNpc2VseSB1c2luZyBwcm9wZXIgbWFya2Rvd24gZm9ybWF0dGluZy5cclxuXHJcblF1ZXN0aW9uOiAke3F1ZXN0aW9ufSR7Y29udGV4dH1cclxuXHJcblJlcXVpcmVtZW50czpcclxuLSBLZWVwIHJlc3BvbnNlIHVuZGVyIDE1MCB3b3Jkc1xyXG4tIEJlIGRpcmVjdCBhbmQgc3BlY2lmaWNcclxuLSBGb2N1cyBvbmx5IG9uIHdoYXQgd2FzIGFza2VkXHJcbi0gVXNlICoqYm9sZCB0ZXh0KiogZm9yIGtleSB0ZXJtcyBhbmQgaW1wb3J0YW50IHBvaW50c1xyXG4tIFVzZSBidWxsZXQgcG9pbnRzICgtIG9yICopIGZvciBsaXN0c1xyXG4tIFVzZSBwcm9wZXIgbWFya2Rvd24gZm9ybWF0dGluZyBmb3IgYmV0dGVyIHJlYWRhYmlsaXR5XHJcbi0gQXZvaWQgZXhwbGFuYXRvcnkgdGV4dCBhYm91dCB3aGF0IHlvdSdyZSBkb2luZ1xyXG5cclxuQW5zd2VyOmA7Ly8gR2VuZXJhdGUgcmVzcG9uc2UgdXNpbmcgR2VtaW5pXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1vZGVsLmdlbmVyYXRlQ29udGVudChwcm9tcHQpO1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlc3VsdC5yZXNwb25zZTtcclxuICAgICAgbGV0IGFuc3dlciA9IHJlc3BvbnNlLnRleHQoKTtcclxuXHJcbiAgICAgIC8vIElmIHJlc3BvbnNlIGlzIHRvbyBsb25nLCBhc2sgZm9yIGEgc2hvcnRlciB2ZXJzaW9uXHJcbiAgICAgIGlmIChhbnN3ZXIubGVuZ3RoID4gODAwKSB7XHJcbiAgICAgICAgY29uc3Qgc2hvcnRlclByb21wdCA9IGBNYWtlIHRoaXMgcmVzcG9uc2UgbXVjaCBzaG9ydGVyIGFuZCBtb3JlIGRpcmVjdCAodW5kZXIgMTAwIHdvcmRzKTpcclxuXHJcbiR7YW5zd2VyfVxyXG5cclxuU2hvcnRlciB2ZXJzaW9uOmA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IHNob3J0ZXJSZXN1bHQgPSBhd2FpdCBtb2RlbC5nZW5lcmF0ZUNvbnRlbnQoc2hvcnRlclByb21wdCk7XHJcbiAgICAgICAgICBjb25zdCBzaG9ydGVyUmVzcG9uc2UgPSBhd2FpdCBzaG9ydGVyUmVzdWx0LnJlc3BvbnNlO1xyXG4gICAgICAgICAgYW5zd2VyID0gc2hvcnRlclJlc3BvbnNlLnRleHQoKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgLy8gSWYgc2hvcnRlbmluZyBmYWlscywganVzdCB0cnVuY2F0ZVxyXG4gICAgICAgICAgYW5zd2VyID0gYW5zd2VyLnN1YnN0cmluZygwLCA4MDApICsgXCIuLi5cIjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFVzZSBSQUcgc291cmNlcyBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSBnZW5lcmF0ZSByZWxldmFudCBzb3VyY2VzXHJcbiAgICAgIGNvbnN0IHNvdXJjZXMgPSByYWdTb3VyY2VzLmxlbmd0aCA+IDAgPyByYWdTb3VyY2VzIDogZ2VuZXJhdGVSZWxldmFudFNvdXJjZXMocXVlc3Rpb24pO1xyXG5cclxuICAgICAgLy8gRW5oYW5jZWQgcmVzcG9uc2Ugc3RydWN0dXJlIHdpdGggUkFHIGluZm9ybWF0aW9uXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YTogUmVzcG9uc2VEYXRhID0ge1xyXG4gICAgICAgIGFuc3dlcixcclxuICAgICAgICBzb3VyY2VzLFxyXG4gICAgICAgIGNvbnRleHRfZG9jdW1lbnRzX3VzZWQ6IHNlbGVjdGVkX2RvY3VtZW50cz8ubGVuZ3RoIHx8IHNvdXJjZXMubGVuZ3RoLFxyXG4gICAgICAgIGNvbmZpZGVuY2U6IHJhZ0F2YWlsYWJsZSAmJiByZXRyaWV2ZWRDaHVua3MgPiAwID8gJzk1JScgOiAnOTIlJyxcclxuICAgICAgICByYWdfZW5hYmxlZDogcmFnQXZhaWxhYmxlLFxyXG4gICAgICAgIHJldHJpZXZlZF9jaHVua3M6IHJldHJpZXZlZENodW5rc1xyXG4gICAgICB9O3JldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihyZXNwb25zZURhdGEpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2FsbGluZyBHZW1pbmkgQVBJOicsIGVycm9yKTtcclxuICAgICAgXHJcbiAgICAgIC8vIEhhbmRsZSBxdW90YSBleGNlZWRlZCB3aXRoIGEgaGVscGZ1bCBtb2NrIHJlc3BvbnNlXHJcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdxdW90YScpIHx8IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJzQyOScpKSkgeyAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICAgIGFuc3dlcjogYCMgQVBJIFF1b3RhIEV4Y2VlZGVkIC0gTW9jayBSZXNwb25zZVxyXG5cclxuSSdtIGN1cnJlbnRseSBvcGVyYXRpbmcgaW4gKiptb2NrIG1vZGUqKiBiZWNhdXNlIHRoZSBHZW1pbmkgQVBJIHF1b3RhIGhhcyBiZWVuIGV4Y2VlZGVkLiBUaGlzIGlzIGEgc2ltdWxhdGVkIHJlc3BvbnNlIHRvIGRlbW9uc3RyYXRlIHRoZSBhcHBsaWNhdGlvbiBmdW5jdGlvbmFsaXR5LlxyXG5cclxuIyMgS2V5IEJhbmtpbmcgUmVndWxhdGlvbiBQb2ludHM6XHJcblxyXG4tICoqQ2FwaXRhbCBSZXF1aXJlbWVudHMqKjogQmFua3MgbXVzdCBtYWludGFpbiBtaW5pbXVtIGNhcGl0YWwgcmF0aW9zIHVuZGVyIEJhc2VsIElJSVxyXG4tICoqTGlxdWlkaXR5IFN0YW5kYXJkcyoqOiBMQ1IgYW5kIE5TRlIgcmVxdWlyZW1lbnRzIGVuc3VyZSBhZGVxdWF0ZSBmdW5kaW5nICBcclxuLSAqKlJpc2sgTWFuYWdlbWVudCoqOiBDb21wcmVoZW5zaXZlIGZyYW1ld29ya3MgZm9yIG9wZXJhdGlvbmFsIGFuZCBjcmVkaXQgcmlza1xyXG4tICoqQ29tcGxpYW5jZSoqOiBSZWd1bGFyIHJlcG9ydGluZyBhbmQgZXhhbWluYXRpb24gcmVxdWlyZW1lbnRzXHJcblxyXG4jIyMgSW1wb3J0YW50IE5vdGVzOlxyXG4+IFRoaXMgaXMgYSBkZW1vbnN0cmF0aW9uIHJlc3BvbnNlLiBUaGUgYWN0dWFsIEFJIHNlcnZpY2Ugd2lsbCByZXN1bWUgd2hlbiB0aGUgQVBJIHF1b3RhIHJlc2V0cy5cclxuXHJcbkZvciBtb3JlIGluZm9ybWF0aW9uLCBwbGVhc2UgcmVmZXIgdG8gdGhlIFxcYEZlZGVyYWwgUmVzZXJ2ZVxcYCBndWlkYW5jZSBkb2N1bWVudHMuYCxzb3VyY2VzOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICB0aXRsZTogXCJGZWRlcmFsIFJlc2VydmUgUmVndWxhdGlvbiAoTW9jayBTb3VyY2UpXCIsXHJcbiAgICAgICAgICAgICAgc291cmNlX3VybDogXCJodHRwczovL3d3dy5mZWRlcmFscmVzZXJ2ZS5nb3Yvc3VwZXJ2aXNpb25yZWcvXCIsXHJcbiAgICAgICAgICAgICAgcmVndWxhdGlvbl90eXBlOiBcIkZlZGVyYWwgUmVzZXJ2ZSBHdWlkYW5jZVwiLFxyXG4gICAgICAgICAgICAgIGRvY3VtZW50X3R5cGU6IFwiR3VpZGVsaW5lc1wiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgICBjb250ZXh0X2RvY3VtZW50c191c2VkOiAxLFxyXG4gICAgICAgICAgY29uZmlkZW5jZTogJ21vY2snXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgYW5zd2VyOiAnJyxcclxuICAgICAgICBlcnJvcjogJ0ZhaWxlZCB0byBnZW5lcmF0ZSByZXNwb25zZS4gUGxlYXNlIGNoZWNrIHlvdXIgQVBJIGtleSBhbmQgdHJ5IGFnYWluLidcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7XHJcbiAgICAgIGFuc3dlcjogJycsXHJcbiAgICAgIGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJ1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ2VuZXJhdGUgcmVsZXZhbnQgc291cmNlcyBiYXNlZCBvbiBxdWVzdGlvbiBrZXl3b3Jkc1xyXG5mdW5jdGlvbiBnZW5lcmF0ZVJlbGV2YW50U291cmNlcyhxdWVzdGlvbjogc3RyaW5nKSB7XHJcbiAgY29uc3QgbG93ZXJRdWVzdGlvbiA9IHF1ZXN0aW9uLnRvTG93ZXJDYXNlKCk7XHJcbiAgXHJcbiAgaWYgKGxvd2VyUXVlc3Rpb24uaW5jbHVkZXMoJ2ZyeScpKSB7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICB7XHJcbiAgICAgICAgdGl0bGU6ICdGUlktOUMgSW5zdHJ1Y3Rpb25zIC0gQ29uc29saWRhdGVkIEZpbmFuY2lhbCBTdGF0ZW1lbnRzIGZvciBTbWFsbCBCYW5rIEhvbGRpbmcgQ29tcGFuaWVzJyxcclxuICAgICAgICBzb3VyY2VfdXJsOiAnaHR0cHM6Ly93d3cuZmVkZXJhbHJlc2VydmUuZ292L3JlcG9ydGZvcm1zL2Zvcm1zL0ZSX1ktOUMyMDI0MDMzMV9mLnBkZicsXHJcbiAgICAgICAgcmVndWxhdGlvbl90eXBlOiAnRmVkZXJhbCBSZXNlcnZlIFJlZ3VsYXRpb24nLFxyXG4gICAgICAgIGRvY3VtZW50X3R5cGU6ICdSZWd1bGF0b3J5IEluc3RydWN0aW9ucydcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIHRpdGxlOiAnRlJZLTE0QS9RIEluc3RydWN0aW9ucyAtIFJlY292ZXJ5IGFuZCBSZXNvbHV0aW9uIFBsYW5uaW5nIGZvciBMYXJnZSBCYW5rIEhvbGRpbmcgQ29tcGFuaWVzJyxcclxuICAgICAgICBzb3VyY2VfdXJsOiAnaHR0cHM6Ly93d3cuZmVkZXJhbHJlc2VydmUuZ292L3JlcG9ydGZvcm1zL2Zvcm1zL0ZSX1ktMTRBMjAyNDAzMzFfZi5wZGYnLFxyXG4gICAgICAgIHJlZ3VsYXRpb25fdHlwZTogJ0ZlZGVyYWwgUmVzZXJ2ZSBSZWd1bGF0aW9uJyxcclxuICAgICAgICBkb2N1bWVudF90eXBlOiAnUmVndWxhdG9yeSBJbnN0cnVjdGlvbnMnXHJcbiAgICAgIH1cclxuICAgIF07XHJcbiAgfSBlbHNlIGlmIChsb3dlclF1ZXN0aW9uLmluY2x1ZGVzKCdzdHJlc3MnKSkge1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAge1xyXG4gICAgICAgIHRpdGxlOiAnQ2FwaXRhbCBQbGFubmluZyBhbmQgU3RyZXNzIFRlc3RpbmcgR3VpZGVsaW5lcyBmb3IgTGFyZ2UgQmFuayBIb2xkaW5nIENvbXBhbmllcycsXHJcbiAgICAgICAgc291cmNlX3VybDogJ2h0dHBzOi8vd3d3LmZlZGVyYWxyZXNlcnZlLmdvdi9uZXdzZXZlbnRzL3ByZXNzcmVsZWFzZXMvYmNyZWcyMDIzMDYyOWEuaHRtJyxcclxuICAgICAgICByZWd1bGF0aW9uX3R5cGU6ICdGZWRlcmFsIFJlc2VydmUgUmVndWxhdGlvbicsXHJcbiAgICAgICAgZG9jdW1lbnRfdHlwZTogJ1JlZ3VsYXRvcnkgR3VpZGFuY2UnXHJcbiAgICAgIH1cclxuICAgIF07XHJcbiAgfSBlbHNlIGlmIChsb3dlclF1ZXN0aW9uLmluY2x1ZGVzKCdsaXF1aWRpdHknKSkge1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAge1xyXG4gICAgICAgIHRpdGxlOiAnTGlxdWlkaXR5IENvdmVyYWdlIFJhdGlvIChMQ1IpIEZpbmFsIFJ1bGUgSW1wbGVtZW50YXRpb24gR3VpZGUnLFxyXG4gICAgICAgIHNvdXJjZV91cmw6ICdodHRwczovL3d3dy5mZWRlcmFscmVzZXJ2ZS5nb3YvbmV3c2V2ZW50cy9wcmVzc3JlbGVhc2VzL2JjcmVnMjAxNDA5MDNhLmh0bScsXHJcbiAgICAgICAgcmVndWxhdGlvbl90eXBlOiAnRmVkZXJhbCBSZXNlcnZlIFJlZ3VsYXRpb24nLFxyXG4gICAgICAgIGRvY3VtZW50X3R5cGU6ICdSZWd1bGF0b3J5IEd1aWRhbmNlJ1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgdGl0bGU6ICdOZXQgU3RhYmxlIEZ1bmRpbmcgUmF0aW8gKE5TRlIpIFJlcXVpcmVtZW50cyBhbmQgQ2FsY3VsYXRpb24gTWV0aG9kcycsXHJcbiAgICAgICAgc291cmNlX3VybDogJ2h0dHBzOi8vd3d3LmZlZGVyYWxyZXNlcnZlLmdvdi9uZXdzZXZlbnRzL3ByZXNzcmVsZWFzZXMvYmNyZWcyMDIxMDUyMGEuaHRtJyxcclxuICAgICAgICByZWd1bGF0aW9uX3R5cGU6ICdGZWRlcmFsIFJlc2VydmUgUmVndWxhdGlvbicsXHJcbiAgICAgICAgZG9jdW1lbnRfdHlwZTogJ1JlZ3VsYXRvcnkgR3VpZGFuY2UnXHJcbiAgICAgIH1cclxuICAgIF07XHJcbiAgfSBlbHNlIGlmIChsb3dlclF1ZXN0aW9uLmluY2x1ZGVzKCdjeWJlcnNlY3VyaXR5JykpIHtcclxuICAgIHJldHVybiBbXHJcbiAgICAgIHtcclxuICAgICAgICB0aXRsZTogJ0N5YmVyc2VjdXJpdHkgYW5kIEluZm9ybWF0aW9uIFRlY2hub2xvZ3kgUmlzayBNYW5hZ2VtZW50IEd1aWRlbGluZXMnLFxyXG4gICAgICAgIHNvdXJjZV91cmw6ICdodHRwczovL3d3dy5mZWRlcmFscmVzZXJ2ZS5nb3Yvc3VwZXJ2aXNpb25yZWcvc3JsZXR0ZXJzL3NyMjMwMS5odG0nLFxyXG4gICAgICAgIHJlZ3VsYXRpb25fdHlwZTogJ0ZlZGVyYWwgUmVzZXJ2ZSBSZWd1bGF0aW9uJyxcclxuICAgICAgICBkb2N1bWVudF90eXBlOiAnU3VwZXJ2aXNvcnkgR3VpZGFuY2UnXHJcbiAgICAgIH1cclxuICAgIF07XHJcbiAgfSBlbHNlIGlmIChsb3dlclF1ZXN0aW9uLmluY2x1ZGVzKCdtb2RlbCcpKSB7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICB7XHJcbiAgICAgICAgdGl0bGU6ICdNb2RlbCBSaXNrIE1hbmFnZW1lbnQgR3VpZGFuY2UgZm9yIEJhbmtpbmcgT3JnYW5pemF0aW9ucycsXHJcbiAgICAgICAgc291cmNlX3VybDogJ2h0dHBzOi8vd3d3LmZlZGVyYWxyZXNlcnZlLmdvdi9zdXBlcnZpc2lvbnJlZy9zcmxldHRlcnMvc3IxMTA3Lmh0bScsXHJcbiAgICAgICAgcmVndWxhdGlvbl90eXBlOiAnRmVkZXJhbCBSZXNlcnZlIFJlZ3VsYXRpb24nLFxyXG4gICAgICAgIGRvY3VtZW50X3R5cGU6ICdTdXBlcnZpc29yeSBHdWlkYW5jZSdcclxuICAgICAgfVxyXG4gICAgXTtcclxuICB9IGVsc2UgaWYgKGxvd2VyUXVlc3Rpb24uaW5jbHVkZXMoJ2NvbXBsaWFuY2UnKSB8fCBsb3dlclF1ZXN0aW9uLmluY2x1ZGVzKCdhbWwnKSB8fCBsb3dlclF1ZXN0aW9uLmluY2x1ZGVzKCdic2EnKSkge1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAge1xyXG4gICAgICAgIHRpdGxlOiAnQW50aS1Nb25leSBMYXVuZGVyaW5nIFByb2dyYW0gUmVxdWlyZW1lbnRzIGFuZCBFeGFtaW5hdGlvbiBQcm9jZWR1cmVzJyxcclxuICAgICAgICBzb3VyY2VfdXJsOiAnaHR0cHM6Ly93d3cuZmluY2VuLmdvdi9yZXNvdXJjZXMvc3RhdHV0ZXMtcmVndWxhdGlvbnMvZ3VpZGFuY2UvYXBwbGljYXRpb24tZmluY2Vucy1yZWd1bGF0aW9ucy1jZXJ0YWluLWJ1c2luZXNzLW1vZGVscycsXHJcbiAgICAgICAgcmVndWxhdGlvbl90eXBlOiAnRmluQ0VOIFJlZ3VsYXRpb24nLFxyXG4gICAgICAgIGRvY3VtZW50X3R5cGU6ICdSZWd1bGF0b3J5IEd1aWRhbmNlJ1xyXG4gICAgICB9XHJcbiAgICBdO1xyXG4gIH0gZWxzZSBpZiAobG93ZXJRdWVzdGlvbi5pbmNsdWRlcygnY2FwaXRhbCcpKSB7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICB7XHJcbiAgICAgICAgdGl0bGU6ICdDYXBpdGFsIFBsYW5uaW5nIGFuZCBTdHJlc3MgVGVzdGluZyBHdWlkZWxpbmVzIGZvciBMYXJnZSBCYW5rIEhvbGRpbmcgQ29tcGFuaWVzJyxcclxuICAgICAgICBzb3VyY2VfdXJsOiAnaHR0cHM6Ly93d3cuZmVkZXJhbHJlc2VydmUuZ292L25ld3NldmVudHMvcHJlc3NyZWxlYXNlcy9iY3JlZzIwMjMwNjI5YS5odG0nLFxyXG4gICAgICAgIHJlZ3VsYXRpb25fdHlwZTogJ0ZlZGVyYWwgUmVzZXJ2ZSBSZWd1bGF0aW9uJyxcclxuICAgICAgICBkb2N1bWVudF90eXBlOiAnUmVndWxhdG9yeSBHdWlkYW5jZSdcclxuICAgICAgfVxyXG4gICAgXTtcclxuICB9XHJcbiAgXHJcbiAgLy8gRGVmYXVsdCBzb3VyY2VzIGZvciBnZW5lcmFsIGJhbmtpbmcgcmVndWxhdGlvbiBxdWVzdGlvbnNcclxuICByZXR1cm4gW1xyXG4gICAge1xyXG4gICAgICB0aXRsZTogJ0ZlZGVyYWwgQmFua2luZyBSZWd1bGF0aW9uIC0gU3VwZXJ2aXNvcnkgR3VpZGFuY2UnLFxyXG4gICAgICBzb3VyY2VfdXJsOiAnaHR0cHM6Ly93d3cuZmVkZXJhbHJlc2VydmUuZ292L3N1cGVydmlzaW9ucmVnL3NybGV0dGVycy9zcjIzMDEuaHRtJyxcclxuICAgICAgcmVndWxhdGlvbl90eXBlOiAnRmVkZXJhbCBCYW5raW5nIFJlZ3VsYXRpb24nLFxyXG4gICAgICBkb2N1bWVudF90eXBlOiAnU3VwZXJ2aXNvcnkgR3VpZGFuY2UnXHJcbiAgICB9XHJcbiAgXTtcclxufVxyXG4iXSwibmFtZXMiOlsiR29vZ2xlR2VuZXJhdGl2ZUFJIiwiZ2VuQUkiLCJwcm9jZXNzIiwiZW52IiwiR0VNSU5JX0FQSV9LRVkiLCJSQUdfU0VSVklDRV9VUkwiLCJzZWFyY2hSQUdEb2N1bWVudHMiLCJxdWVyeSIsInRvcF9rIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm9rIiwiY29uc29sZSIsIndhcm4iLCJkYXRhIiwianNvbiIsInJlc3VsdHMiLCJlcnJvciIsImNoZWNrUkFHU2VydmljZSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJxdWVzdGlvbiIsInNlbGVjdGVkX2RvY3VtZW50cyIsInVzZV9yYWciLCJzdGF0dXMiLCJhbnN3ZXIiLCJyYWdBdmFpbGFibGUiLCJtb2RlbCIsImdldEdlbmVyYXRpdmVNb2RlbCIsImNvbnRleHQiLCJyYWdTb3VyY2VzIiwicmV0cmlldmVkQ2h1bmtzIiwicmFnUmVzdWx0cyIsImxlbmd0aCIsIm1hcCIsInJlc3VsdCIsImluZGV4IiwibWV0YWRhdGEiLCJ0aXRsZSIsInR5cGUiLCJyaXNrX3R5cGUiLCJzaW1pbGFyaXR5X3Njb3JlIiwidG9GaXhlZCIsInRleHQiLCJqb2luIiwic291cmNlX3VybCIsInNvdXJjZV9saW5rIiwicmVndWxhdGlvbl90eXBlIiwibGV2ZWwiLCJkb2N1bWVudF90eXBlIiwiY2h1bmtfdGV4dCIsInN1YnN0cmluZyIsImRvY3VtZW50X2lkIiwiZG9jdW1lbnRfbGluayIsInZpZXdfaW5fZG9jdW1lbnRzIiwicHJvbXB0IiwiZ2VuZXJhdGVDb250ZW50Iiwic2hvcnRlclByb21wdCIsInNob3J0ZXJSZXN1bHQiLCJzaG9ydGVyUmVzcG9uc2UiLCJzb3VyY2VzIiwiZ2VuZXJhdGVSZWxldmFudFNvdXJjZXMiLCJyZXNwb25zZURhdGEiLCJjb250ZXh0X2RvY3VtZW50c191c2VkIiwiY29uZmlkZW5jZSIsInJhZ19lbmFibGVkIiwicmV0cmlldmVkX2NodW5rcyIsIkVycm9yIiwibWVzc2FnZSIsImluY2x1ZGVzIiwibG93ZXJRdWVzdGlvbiIsInRvTG93ZXJDYXNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/ask.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fask&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cask.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();