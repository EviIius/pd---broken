(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(1769)}])},1769:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return pages}});var n=s(5893),a=s(7294),i=s(3217),r=s(713);function PlatformHeader(){let{isConnected:e,isLoading:t,error:s,lastChecked:l}=function(){let[e,t]=(0,a.useState)({isConnected:!1,isLoading:!0,error:null,lastChecked:null}),checkApiStatus=async()=>{try{t(e=>({...e,isLoading:!0,error:null}));let e=await fetch("/api/health",{method:"GET",headers:{"Content-Type":"application/json"}});if(e.ok){let s=await e.json();"healthy"===s.status?t({isConnected:!0,isLoading:!1,error:null,lastChecked:new Date}):t({isConnected:!1,isLoading:!1,error:s.error||s.message,lastChecked:new Date})}else throw Error("HTTP ".concat(e.status,": ").concat(e.statusText))}catch(e){t({isConnected:!1,isLoading:!1,error:e instanceof Error?e.message:"Unable to connect to API",lastChecked:new Date})}};return(0,a.useEffect)(()=>{checkApiStatus();let e=setInterval(checkApiStatus,6e4);return()=>clearInterval(e)},[]),{...e,recheck:checkApiStatus}}(),[o,c]=(0,a.useState)(!1),getStatusIcon=()=>t?(0,n.jsx)(i.Z,{className:"h-2 w-2 animate-spin text-blue-300"}):e?(0,n.jsx)("div",{className:"h-2 w-2 bg-green-400 rounded-full animate-pulse"}):(0,n.jsx)("div",{className:"h-2 w-2 bg-red-400 rounded-full"});return(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsxs)("div",{className:"bg-blue-600 text-white py-3 px-6 flex justify-between items-center",children:[(0,n.jsx)("div",{className:"flex items-center space-x-3 relative",children:(0,n.jsxs)("div",{className:"cursor-help relative",onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[(0,n.jsxs)("h1",{className:"text-2xl font-bold tracking-wide flex items-center space-x-2",children:[(0,n.jsx)("span",{children:"Policy Q&A"}),(0,n.jsxs)("div",{className:"flex items-center space-x-1 text-xs",children:[getStatusIcon(),(0,n.jsx)("span",{children:t?"Checking...":e?"Online":"Offline"})]})]}),o&&(0,n.jsx)("div",{className:"absolute top-full left-0 mt-2 bg-white text-gray-800 border border-gray-200 shadow-xl rounded-lg p-4 w-80 z-50",children:(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-semibold text-lg text-gray-900",children:"Policy Q&A System"}),(0,n.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Intelligent policy document search and Q&A system"})]}),(0,n.jsx)("div",{className:"text-sm text-gray-700 leading-relaxed",children:(0,n.jsx)("p",{children:"Ask questions about federal banking regulations and get AI-powered responses with source citations and confidence scores."})}),(0,n.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[getStatusIcon(),(0,n.jsx)("span",{className:"text-sm font-medium ".concat(e?"text-green-600":"text-red-600"),children:"API Connected"})]}),"                    ",(0,n.jsxs)("button",{onClick:e=>{e.preventDefault(),window.location.reload()},className:"text-xs text-gray-500 hover:text-gray-700 border border-gray-300 px-2 py-1 rounded flex items-center space-x-1 hover:bg-gray-50 transition-colors",children:[(0,n.jsx)(r.Z,{className:"h-3 w-3"}),(0,n.jsx)("span",{children:"Refresh"})]})]}),(0,n.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,n.jsxs)("p",{children:["Last checked: ",l?l.toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}):"Never"]}),s&&(0,n.jsxs)("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-red-700",children:[(0,n.jsx)("p",{className:"font-medium",children:"Error:"}),(0,n.jsx)("p",{children:s})]})]})]})})]})}),(0,n.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,n.jsxs)("nav",{className:"flex items-center space-x-4 text-sm",children:[(0,n.jsx)("a",{href:"#",className:"hover:underline hover:text-blue-200 transition-colors",children:"Dashboard"}),(0,n.jsx)("a",{href:"#",className:"hover:underline hover:text-blue-200 transition-colors",children:"Policy Library"}),(0,n.jsx)("a",{href:"#",className:"hover:underline hover:text-blue-200 transition-colors",children:"Analytics"}),(0,n.jsx)("a",{href:"#",className:"hover:underline hover:text-blue-200 transition-colors",children:"Reports"}),(0,n.jsx)("a",{href:"#",className:"hover:underline hover:text-blue-200 transition-colors",children:"Settings"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2 text-sm border-l border-blue-500 pl-4",children:[(0,n.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-xs font-semibold",children:"U"}),(0,n.jsx)("a",{href:"#",className:"hover:underline hover:text-blue-200 transition-colors",children:"Account"})]})]})]}),(0,n.jsx)("div",{className:"h-1 ".concat(t?"bg-blue-500":e?"bg-green-500":"bg-red-500")})]})}function Footer(){return(0,n.jsx)("footer",{className:"w-full border-t border-border mt-auto",children:(0,n.jsxs)("div",{className:"container mx-auto py-4 px-6 text-center text-sm text-muted-foreground",children:["\xa9 ",new Date().getFullYear()," Policy Q&A. All rights reserved."]})})}function Layout(e){let{children:t}=e;return(0,n.jsxs)("div",{className:"min-h-screen flex flex-col bg-background",children:[(0,n.jsx)(PlatformHeader,{}),(0,n.jsx)("main",{className:"flex-1 w-full",children:t}),(0,n.jsx)(Footer,{})]})}var l=s(8971),o=s(4998);let c=["All","Last 7 days","Last month","This month","Year to date","Last 12 months"],d=["Desktop procedures","Executive summary","Exhibit","FAQ","Glossary","Guidelines","Job aid","Methodology","Narrative"],u=["Group","Business Unit","Local"],m=["Financial Reporting","Risk Management","Information Technology","Corporate Development","Model Risk Management","Capital Management","Capital Planning","Community Development","Consumer Compliance"];function FilterPanel(e){let{filters:t,onFilterChange:s,onClearAllFilters:i}=e,[r,h]=(0,a.useState)({publicationDate:!0,documentType:!0,level:!0,owningBusinessGroup:!0}),toggleSection=e=>{h(t=>({...t,[e]:!t[e]}))},handlePublicationDateChange=e=>{s({publicationDate:"All"===e?null:e})},handleCheckboxChange=(e,n,a)=>{let i=t[e]||[];s({[e]:a?[...i,n]:i.filter(e=>e!==n)})};return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsx)("h2",{className:"text-lg font-medium text-blue-600",children:"Filters"}),(0,n.jsx)("button",{onClick:i,className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Clear all"})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsxs)("button",{onClick:()=>toggleSection("publicationDate"),className:"flex items-center w-full text-left font-semibold",children:[r.publicationDate?(0,n.jsx)(l.Z,{className:"h-4 w-4 mr-1"}):(0,n.jsx)(o.Z,{className:"h-4 w-4 mr-1"}),(0,n.jsx)("span",{children:"Publication date"})]}),r.publicationDate&&(0,n.jsx)("div",{className:"mt-2 pl-5 space-y-2",children:c.map(e=>(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"radio",id:"date-".concat(e.replace(/\s+/g,"-")),name:"publicationDate",value:e,checked:(t.publicationDate||"All")===e,onChange:e=>handlePublicationDateChange(e.target.value),className:"mr-2"}),(0,n.jsx)("label",{htmlFor:"date-".concat(e.replace(/\s+/g,"-")),className:"text-sm",children:e})]},e))})]}),"      ",(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsxs)("button",{onClick:()=>toggleSection("documentType"),className:"flex items-center w-full text-left font-semibold",children:[r.documentType?(0,n.jsx)(l.Z,{className:"h-4 w-4 mr-1"}):(0,n.jsx)(o.Z,{className:"h-4 w-4 mr-1"}),(0,n.jsx)("span",{children:"Document type"})]}),r.documentType&&(0,n.jsx)("div",{className:"mt-2 pl-5 space-y-2",children:d.map(e=>(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",id:"doc-type-".concat(e.replace(/\s+/g,"-")),value:e,checked:t.documentType.includes(e),onChange:e=>handleCheckboxChange("documentType",e.target.value,e.target.checked),className:"mr-2"}),(0,n.jsx)("label",{htmlFor:"doc-type-".concat(e.replace(/\s+/g,"-")),className:"text-sm",children:e})]},e))})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsxs)("button",{onClick:()=>toggleSection("level"),className:"flex items-center w-full text-left font-semibold",children:[r.level?(0,n.jsx)(l.Z,{className:"h-4 w-4 mr-1"}):(0,n.jsx)(o.Z,{className:"h-4 w-4 mr-1"}),(0,n.jsx)("span",{children:"Level"})]}),r.level&&(0,n.jsx)("div",{className:"mt-2 pl-5 space-y-2",children:u.map(e=>(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",id:"level-".concat(e.replace(/\s+/g,"-")),value:e,checked:t.level.includes(e),onChange:e=>handleCheckboxChange("level",e.target.value,e.target.checked),className:"mr-2"}),(0,n.jsx)("label",{htmlFor:"level-".concat(e.replace(/\s+/g,"-")),className:"text-sm",children:e})]},e))})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("button",{onClick:()=>toggleSection("owningBusinessGroup"),className:"flex items-center w-full text-left font-semibold",children:[r.owningBusinessGroup?(0,n.jsx)(l.Z,{className:"h-4 w-4 mr-1"}):(0,n.jsx)(o.Z,{className:"h-4 w-4 mr-1"}),(0,n.jsx)("span",{children:"Owning business"})]}),r.owningBusinessGroup&&(0,n.jsx)("div",{className:"mt-2 pl-5 space-y-2",children:m.map(e=>(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",id:"owning-business-".concat(e.replace(/\s+/g,"-")),value:e,checked:t.owningBusinessGroup.includes(e),onChange:e=>handleCheckboxChange("owningBusinessGroup",e.target.value,e.target.checked),className:"mr-2"}),(0,n.jsx)("label",{htmlFor:"owning-business-".concat(e.replace(/\s+/g,"-")),className:"text-sm",children:e})]},e))})]})]})}var h=s(7764),p=s(512),g=s(8388);function cn(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,g.m6)((0,p.W)(t))}let x=a.forwardRef((e,t)=>{let{className:s,type:a,...i}=e;return(0,n.jsx)("input",{type:a,className:cn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...i})});function DocumentList(e){let{documents:t,selectedDocuments:s,onSelectDocument:i,filters:r}=e,[l,o]=(0,a.useState)(""),matchesPublicationDateFilter=(e,t)=>{if(!t||"All"===t)return!0;let s=new Date(e),n=new Date,a=new Date(n.getFullYear(),n.getMonth(),n.getDate()),i=new Date(s.getFullYear(),s.getMonth(),s.getDate());switch(t){case"Last 7 days":let r=new Date(a);return r.setDate(a.getDate()-7),i>=r&&i<=a;case"Last month":let l=new Date(a);l.setMonth(a.getMonth()-1),l.setDate(1);let o=new Date(a.getFullYear(),a.getMonth(),0);return i>=l&&i<=o;case"This month":let c=new Date(a.getFullYear(),a.getMonth(),1);return i>=c&&i<=a;case"Year to date":let d=new Date(a.getFullYear(),0,1);return i>=d&&i<=a;case"Last 12 months":let u=new Date(a);return u.setFullYear(a.getFullYear()-1),i>=u&&i<=a;default:return!0}},c=t.filter(e=>{let t=e.title.toLowerCase().includes(l.toLowerCase())||e.category.toLowerCase().includes(l.toLowerCase()),s=matchesPublicationDateFilter(e.publicationDate,r.publicationDate),n=0===r.documentType.length||r.documentType.includes(e.category),a=0===r.level.length||r.level.includes(e.level),i=0===r.owningBusinessGroup.length||r.owningBusinessGroup.includes(e.owningBusinessGroup),o=t&&s&&n&&a&&i;return r.publicationDate&&"All"!==r.publicationDate&&console.log('Document "'.concat(e.title,'" (').concat(e.publicationDate,'): Date filter "').concat(r.publicationDate,'" - ').concat(s?"PASS":"FAIL")),o});return(0,n.jsxs)("div",{children:["      ",(0,n.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h2",{className:"text-xl font-semibold text-blue-600",children:["All documents (",c.length," of ",t.length,")"]}),r.publicationDate&&"All"!==r.publicationDate&&(0,n.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["\uD83D\uDCC5 Filtered by: ",r.publicationDate]})]}),(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsxs)("span",{className:"text-sm text-muted-foreground",children:[s.length," document(s) selected"]})})]}),(0,n.jsxs)("div",{className:"relative mb-4",children:[(0,n.jsx)(h.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,n.jsx)(x,{type:"text",placeholder:"Search for documents...",value:l,onChange:e=>o(e.target.value),className:"pl-10"})]}),(0,n.jsx)("div",{className:"border rounded-lg",children:(0,n.jsxs)("table",{className:"w-full",children:[(0,n.jsx)("thead",{className:"border-b bg-muted/50",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"w-12 p-4 text-left",children:(0,n.jsx)("input",{type:"checkbox",checked:s.length===t.length&&t.length>0,onChange:e=>{e.target.checked?t.forEach(e=>{s.some(t=>t.id===e.id)||i(e)}):s.forEach(e=>i(e))},className:"rounded"})}),"              ",(0,n.jsx)("th",{className:"p-4 text-left font-medium",children:"ID"}),(0,n.jsx)("th",{className:"p-4 text-left font-medium",children:"TITLE"}),(0,n.jsx)("th",{className:"p-4 text-left font-medium",children:"DOCUMENT TYPE"}),(0,n.jsx)("th",{className:"p-4 text-left font-medium",children:"LEVEL"}),(0,n.jsx)("th",{className:"p-4 text-left font-medium",children:"OWNING BUSINESS"}),(0,n.jsx)("th",{className:"p-4 text-left font-medium",children:"PUBLICATION DATE"})]})}),(0,n.jsx)("tbody",{children:c.map((e,t)=>(0,n.jsxs)("tr",{className:"border-b hover:bg-muted/30",children:[(0,n.jsx)("td",{className:"p-4",children:(0,n.jsx)("input",{type:"checkbox",checked:s.some(t=>t.id===e.id),onChange:()=>i(e),className:"rounded"})}),"                ",(0,n.jsx)("td",{className:"p-4 text-sm text-muted-foreground",children:t+10}),(0,n.jsx)("td",{className:"p-4 text-sm font-medium",children:e.title}),(0,n.jsx)("td",{className:"p-4 text-sm text-muted-foreground",children:e.category}),(0,n.jsx)("td",{className:"p-4 text-sm text-muted-foreground",children:e.level}),(0,n.jsx)("td",{className:"p-4 text-sm text-muted-foreground",children:e.owningBusinessGroup}),(0,n.jsx)("td",{className:"p-4 text-sm text-muted-foreground",children:new Date(e.publicationDate).toLocaleDateString()})]},e.id))})]})})]})}x.displayName="Input";var f=s(3742),b=s(6915),v=s(1408),y=s(4237),w=s(8814),j=s(3025),N=s(3718),C=s(7737),k=s(2841),D=s(8426),R=s(2003);let S=(0,R.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),T=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:r=!1,...l}=e,o=r?D.g7:"button";return(0,n.jsx)(o,{className:cn(S({variant:a,size:i,className:s})),ref:t,...l})});T.displayName="Button";var I=s(6178);let A=a.forwardRef((e,t)=>{let{className:s,children:a,...i}=e;return(0,n.jsxs)(I.fC,{ref:t,className:cn("relative overflow-hidden",s),...i,children:[(0,n.jsx)(I.l_,{className:"h-full w-full rounded-[inherit]",children:a}),(0,n.jsx)(F,{}),(0,n.jsx)(I.Ns,{})]})});A.displayName=I.fC.displayName;let F=a.forwardRef((e,t)=>{let{className:s,orientation:a="vertical",...i}=e;return(0,n.jsx)(I.gb,{ref:t,orientation:a,className:cn("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...i,children:(0,n.jsx)(I.q4,{className:"relative flex-1 rounded-full bg-border"})})});F.displayName=I.gb.displayName;var B=s(1853);function ConfirmDialog(e){let{isOpen:t,onClose:s,onConfirm:i,title:r,message:l,confirmText:o="OK",cancelText:c="Cancel",variant:d="default"}=e,[u,m]=(0,a.useState)(!1),[h,p]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{if(t){m(!0);let e=setTimeout(()=>{p(!0)},10);return()=>clearTimeout(e)}{p(!1);let e=setTimeout(()=>{m(!1)},200);return()=>clearTimeout(e)}},[t]),(0,a.useEffect)(()=>{let handleEscape=e=>{"Escape"===e.key&&t&&s()};return t&&(document.addEventListener("keydown",handleEscape),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",handleEscape),document.body.style.overflow="unset"}},[t,s]),u)?(0,n.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center transition-all duration-200 ease-out ".concat(h?"opacity-100":"opacity-0"),children:[(0,n.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm transition-opacity duration-200 ease-out ".concat(h?"opacity-100":"opacity-0"),onClick:()=>{s()}}),(0,n.jsx)("div",{className:"relative z-10 w-full max-w-md mx-4 transition-all duration-200 ease-out ".concat(h?"scale-100 opacity-100 translate-y-0":"scale-95 opacity-0 translate-y-4"),children:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-xl border-0 ring-1 ring-black/5",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 p-6 pb-4",children:["destructive"===d&&(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)(B.Z,{className:"h-6 w-6 text-red-600"})}),(0,n.jsx)("div",{children:(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:r})})]}),(0,n.jsx)("div",{className:"px-6 pb-4",children:(0,n.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:l})}),(0,n.jsxs)("div",{className:"flex justify-end gap-3 px-6 py-4 border-t bg-gray-50/50 rounded-b-lg",children:[(0,n.jsx)(T,{variant:"outline",onClick:s,className:"text-gray-700 hover:text-gray-900 hover:bg-gray-100 transition-all duration-150",children:c}),(0,n.jsx)(T,{onClick:()=>{i(),s()},className:"transition-all duration-150 transform hover:scale-105 active:scale-95 ".concat("destructive"===d?"bg-red-600 hover:bg-red-700 text-white shadow-lg hover:shadow-red-200":"bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-blue-200"),children:o})]})]})})]}):null}let ChatMessageBubble=e=>{let{message:t,onCopyToClipboard:s,copiedMessageId:a,onFeedback:i}=e;return(0,n.jsx)("div",{className:cn("flex items-start gap-3","user"===t.role?"justify-end":"justify-start"),children:(0,n.jsxs)("div",{className:cn("rounded-lg px-4 py-3 max-w-[85%] break-words","user"===t.role?"bg-primary text-primary-foreground":"bg-muted"),children:[(0,n.jsx)("p",{className:"text-sm",children:t.content}),"assistant"===t.role&&t.sources&&t.sources.length>0&&(0,n.jsxs)("div",{className:"mt-3 pt-3 border-t border-border/50",children:[(0,n.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Sources:"}),"                        ",(0,n.jsx)("div",{className:"space-y-1",children:t.sources.map((e,t)=>(0,n.jsxs)("div",{className:"text-xs text-muted-foreground",children:[(0,n.jsx)("a",{href:e.source_url,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-blue-600 hover:text-blue-800 hover:underline",children:e.title}),(0,n.jsxs)("span",{className:"ml-1 text-blue-600",children:["(",e.regulation_type,")"]})]},t))}),t.confidence&&(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsxs)("span",{className:cn("text-xs px-2 py-1 rounded-full","high"===t.confidence?"bg-green-100 text-green-700":"medium"===t.confidence?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:[t.confidence," confidence"]})})]}),"assistant"===t.role&&(0,n.jsxs)("div",{className:"flex items-center justify-end gap-2 mt-2",children:[(0,n.jsx)(T,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>s(t.content,t.id),children:a===t.id?(0,n.jsx)(f.Z,{className:"h-4 w-4 text-green-500"}):(0,n.jsx)(b.Z,{className:"h-4 w-4"})}),(0,n.jsx)(T,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>i({messageId:t.id,rating:"helpful",timestamp:new Date}),children:(0,n.jsx)(v.Z,{className:"h-4 w-4"})}),(0,n.jsx)(T,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>i({messageId:t.id,rating:"not_helpful",timestamp:new Date}),children:(0,n.jsx)(y.Z,{className:"h-4 w-4"})})]})]})})};function ChatAssistant(e){let{isExpanded:t,onToggleExpand:s,selectedDocuments:i,suggestedPrompts:r=[]}=e,[l,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(""),[m,h]=(0,a.useState)(null),[p,g]=(0,a.useState)(!1),[f,b]=(0,a.useState)(null),[v,y]=(0,a.useState)(!1),D=(0,a.useRef)(null);(0,a.useEffect)(()=>{D.current&&D.current.scrollTo({top:D.current.scrollHeight,behavior:"smooth"})},[l]);let handleSubmit=async e=>{if(e.preventDefault(),!d.trim()||v)return;let t={id:Date.now().toString(),role:"user",content:d,timestamp:new Date};c(e=>[...e,t]),u(""),y(!0);try{let e=await fetch("/api/ask",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:d,selected_documents:i.map(e=>e.title)})}),t=await e.json(),s={id:(Date.now()+1).toString(),role:"assistant",content:t.answer||"I apologize, but I couldn't generate a response. Please try again.",timestamp:new Date,sources:t.sources||[],confidence:t.confidence||"medium"};c(e=>[...e,s])}catch(t){console.error("Error calling API:",t);let e={id:(Date.now()+1).toString(),role:"assistant",content:"I'm sorry, I encountered an error while processing your question. Please make sure the backend service is running and try again.",timestamp:new Date,confidence:"error"};c(t=>[...t,e])}finally{y(!1)}},copyToClipboard=async(e,t)=>{try{await navigator.clipboard.writeText(e),h(t),setTimeout(()=>h(null),2e3)}catch(e){console.error("Failed to copy text: ",e)}},handleFeedback=e=>{console.log("Feedback received:",e)};return t?(0,n.jsxs)("div",{className:"flex flex-col bg-card rounded-lg border",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer",onClick:s,children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-blue-600",children:"Policy Assistant"}),(0,n.jsx)(w.Z,{className:"h-5 w-5 text-muted-foreground"})]}),"        ",(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(T,{variant:"ghost",size:"sm",onClick:()=>{if(0===l.length){b("No chat history to download."),setTimeout(()=>b(null),3e3);return}let e=l.map(e=>{let t=e.timestamp.toLocaleString(),s="user"===e.role?"You":"Policy Assistant";return"[".concat(t,"] ").concat(s,": ").concat(e.content)}).join("\n\n"),t=i.length>0?"Selected Documents: ".concat(i.map(e=>e.title).join(", "),"\n\n"):"No documents were selected during this conversation.\n\n",s="Policy Assistant Chat History\nGenerated on: ".concat(new Date().toLocaleString(),"\n\n").concat(t).concat(e),n=new Blob([s],{type:"text/plain"}),a=URL.createObjectURL(n),r=document.createElement("a");r.href=a,r.download="policy-chat-".concat(new Date().toISOString().split("T")[0],".txt"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a),b("Chat history downloaded successfully!"),setTimeout(()=>b(null),3e3)},disabled:0===l.length,className:"text-muted-foreground hover:text-blue-600 hover:bg-blue-50 transition-all duration-200 hover:scale-105",title:"Download chat history",children:(0,n.jsx)(j.Z,{className:"h-4 w-4"})}),(0,n.jsx)(T,{variant:"ghost",size:"sm",onClick:()=>{0!==l.length&&g(!0)},disabled:0===l.length,className:"text-muted-foreground hover:text-red-600 hover:bg-red-50 transition-all duration-200 hover:scale-105",title:"Clear chat history",children:(0,n.jsx)(N.Z,{className:"h-4 w-4"})})]})]}),"      ",f&&(0,n.jsx)("div",{className:"mx-4 mb-2 transform transition-all duration-300 ease-out animate-in slide-in-from-top-2 fade-in-0",children:(0,n.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-md p-3 shadow-sm",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,n.jsx)("p",{className:"text-sm text-green-800 font-medium",children:f})]})})}),(0,n.jsx)(A,{className:"h-64 p-4",ref:D,children:(0,n.jsx)("div",{className:"space-y-4",children:l.length>0?l.map(e=>(0,n.jsx)(ChatMessageBubble,{message:e,onCopyToClipboard:copyToClipboard,copiedMessageId:m,onFeedback:handleFeedback},e.id)):(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center text-muted-foreground space-y-4",children:[(0,n.jsx)(C.Z,{className:"h-8 w-8 mb-2"}),(0,n.jsx)("p",{children:"Ask a question about the selected documents"}),(0,n.jsx)("p",{className:"text-sm mt-1",children:0===i.length?"No documents selected. Select documents to get more accurate answers.":"".concat(i.length," document(s) selected")}),r.length>0&&(0,n.jsxs)("div",{className:"w-full max-w-md space-y-2 mt-4",children:[(0,n.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"Suggested questions:"}),(0,n.jsx)("div",{className:"space-y-2",children:r.map((e,t)=>(0,n.jsx)("button",{onClick:()=>u(e),className:"w-full text-left p-3 text-sm bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg border border-blue-200 transition-colors duration-200",children:e},t))})]})]})})}),"      ",(0,n.jsxs)("div",{className:"p-4 border-t",children:["        ",(0,n.jsxs)("form",{onSubmit:handleSubmit,className:"flex items-center gap-3",children:[(0,n.jsx)(x,{value:d,onChange:e=>u(e.target.value),placeholder:"Ask a question about the selected documents...",className:"flex-grow",disabled:v}),(0,n.jsx)(T,{type:"submit",size:"icon",disabled:!d.trim()||v,className:"bg-blue-600 hover:bg-blue-700",children:v?(0,n.jsx)("div",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"}):(0,n.jsx)(k.Z,{className:"h-5 w-5"})})]})]}),(0,n.jsx)(ConfirmDialog,{isOpen:p,onClose:()=>g(!1),onConfirm:()=>{c([]),g(!1)},title:"Clear Chat History",message:"Are you sure you want to clear the chat history? This action cannot be undone.",confirmText:"Clear",cancelText:"Cancel",variant:"destructive"})]}):(0,n.jsx)("div",{className:"bg-card rounded-lg border hover:border-blue-200 transition-all duration-200 hover:shadow-sm",children:(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-blue-50/50 transition-colors duration-200",onClick:s,children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-blue-600",children:"Policy Assistant"}),(0,n.jsx)(o.Z,{className:"h-5 w-5 text-muted-foreground transition-transform duration-200 hover:translate-x-0.5"})]})})}let G=[{id:"1",title:"FRY-9C Consolidated Financial Statements for Bank Holding Companies",category:"Guidelines",content:"Comprehensive reporting requirements for bank holding companies with total consolidated assets of $1 billion or more. Includes instructions for quarterly consolidated financial statements.",publicationDate:"2024-12-15",level:"Group",owningBusinessGroup:"Financial Reporting",region:"US",riskType:"Regulatory Risk",topic:"Financial Reporting",sourceUrl:"https://www.federalreserve.gov/apps/reportforms/reportdetail.aspx?sOoYJ+5BzDZkVjaOJDZr7Q=="},{id:"2",title:"FRY-4 Annual Report of Changes in Organizational Structure",category:"Desktop procedures",content:"Annual report filed by bank holding companies to report changes in organizational structure, including acquisitions, divestitures, and other corporate changes.",publicationDate:"2024-12-10",level:"Business Unit",owningBusinessGroup:"Corporate Development",region:"US",riskType:"Regulatory Risk",topic:"Organizational Structure",sourceUrl:"https://www.federalreserve.gov/apps/reportforms/reportdetail.aspx?sOoYJ+5BzDbCVjaOJDZr7Q=="},{id:"3",title:"Regulation YY - Enhanced Prudential Standards",category:"Methodology",content:"Enhanced prudential standards for large bank holding companies and foreign banking organizations. Covers capital planning, stress testing, and risk management requirements.",publicationDate:"2024-11-20",level:"Group",owningBusinessGroup:"Risk Management",region:"US",riskType:"Capital Risk",topic:"Prudential Standards",sourceUrl:"https://www.federalreserve.gov/supervisionreg/topics/large-bank-supervision/enhanced-prudential-standards.htm"},{id:"4",title:"FFIEC Cybersecurity Assessment Tool Implementation Guide",category:"Narrative",content:"Comprehensive guide for implementing the FFIEC Cybersecurity Assessment Tool to evaluate and enhance cybersecurity preparedness at financial institutions.",publicationDate:"2024-12-05",level:"Group",owningBusinessGroup:"Information Technology",region:"US",riskType:"Cyber Risk",topic:"Cybersecurity",sourceUrl:"https://www.ffiec.gov/cyberassessmenttool.htm"},{id:"5",title:"SR 11-7 Guidance on Model Risk Management",category:"Executive summary",content:"Federal Reserve guidance on model risk management for banks and bank holding companies. Covers model development, implementation, use, and validation processes.",publicationDate:"2024-12-01",level:"Group",owningBusinessGroup:"Model Risk Management",region:"US",riskType:"Model Risk",topic:"Model Validation",sourceUrl:"https://www.federalreserve.gov/supervisionreg/srletters/sr1107.htm"},{id:"6",title:"Call Report Instructions - FFIEC 031/041",category:"FAQ",content:"Detailed instructions for completing Consolidated Reports of Condition and Income (Call Reports) for banks with domestic and foreign offices.",publicationDate:"2024-11-25",level:"Business Unit",owningBusinessGroup:"Financial Reporting",region:"US",riskType:"Regulatory Risk",topic:"Call Reports",sourceUrl:"https://www.ffiec.gov/ffiecinfobase/resources/call/call_main.htm"},{id:"7",title:"Basel III Capital Requirements Implementation",category:"Job aid",content:"Implementation guide for Basel III capital requirements including Common Equity Tier 1, Tier 1, and Total Capital ratios for US banking organizations.",publicationDate:"2024-12-18",level:"Group",owningBusinessGroup:"Capital Management",region:"US",riskType:"Capital Risk",topic:"Basel III Compliance",sourceUrl:"https://www.federalreserve.gov/supervisionreg/topics/capital/basel3/implementation.htm"},{id:"8",title:"CCAR and DFAST Stress Testing Requirements",category:"Glossary",content:"Comprehensive overview of Comprehensive Capital Analysis and Review (CCAR) and Dodd-Frank Act Stress Test (DFAST) requirements for large banking organizations.",publicationDate:"2024-11-30",level:"Group",owningBusinessGroup:"Capital Planning",region:"US",riskType:"Capital Risk",topic:"Stress Testing",sourceUrl:"https://www.federalreserve.gov/supervisionreg/stress-tests/ccar.htm"},{id:"9",title:"Community Reinvestment Act (CRA) Examination Procedures",category:"Exhibit",content:"Federal examination procedures for evaluating bank performance under the Community Reinvestment Act, including lending, investment, and service tests.",publicationDate:"2024-12-12",level:"Business Unit",owningBusinessGroup:"Community Development",region:"US",riskType:"Compliance Risk",topic:"CRA Compliance",sourceUrl:"https://www.ffiec.gov/cra/examiner.htm"},{id:"10",title:"Regulation Z - Truth in Lending Implementation Guide",category:"Guidelines",content:"Implementation guide for Regulation Z requirements covering disclosure requirements for consumer credit transactions and mortgage lending practices.",publicationDate:"2024-12-08",level:"Local",owningBusinessGroup:"Consumer Compliance",region:"US",riskType:"Compliance Risk",topic:"Consumer Protection",sourceUrl:"https://www.consumerfinance.gov/rules-policy/regulations/1026/"},{id:"11",title:"Federal Reserve Board SR 20-3 - Remote Work Risk Management",category:"Guidelines",content:"Guidance on managing operational risks associated with remote work arrangements for financial institutions.",publicationDate:"2024-12-19",level:"Group",owningBusinessGroup:"Risk Management",region:"US",riskType:"Operational Risk",topic:"Remote Work",sourceUrl:"https://www.federalreserve.gov/supervisionreg/srletters/sr2003.htm"},{id:"12",title:"Anti-Money Laundering (AML) Program Requirements",category:"Desktop procedures",content:"Comprehensive procedures for implementing and maintaining effective anti-money laundering programs in accordance with federal requirements.",publicationDate:"2024-11-15",level:"Business Unit",owningBusinessGroup:"Risk Management",region:"US",riskType:"Compliance Risk",topic:"AML Compliance",sourceUrl:"https://www.fincen.gov/resources/statutes-regulations/guidance/anti-money-laundering-requirements"},{id:"13",title:"Interest Rate Risk Management Guidelines",category:"Methodology",content:"Federal guidelines for managing interest rate risk in banking organizations, including measurement and monitoring requirements.",publicationDate:"2024-03-20",level:"Group",owningBusinessGroup:"Risk Management",region:"US",riskType:"Market Risk",topic:"Interest Rate Risk",sourceUrl:"https://www.federalreserve.gov/supervisionreg/topics/interestrate.htm"},{id:"14",title:"Liquidity Coverage Ratio (LCR) Requirements",category:"Executive summary",content:"Summary of Liquidity Coverage Ratio requirements for large banking organizations under Basel III implementation.",publicationDate:"2024-01-15",level:"Group",owningBusinessGroup:"Risk Management",region:"US",riskType:"Liquidity Risk",topic:"Basel III Compliance",sourceUrl:"https://www.federalreserve.gov/newsevents/pressreleases/bcreg20140903a.htm"},{id:"15",title:"CECL Implementation Best Practices",category:"Job aid",content:"Best practices for implementing Current Expected Credit Loss (CECL) methodology for allowance estimation.",publicationDate:"2023-12-10",level:"Business Unit",owningBusinessGroup:"Financial Reporting",region:"US",riskType:"Credit Risk",topic:"CECL Implementation",sourceUrl:"https://www.federalreserve.gov/supervisionreg/topics/cecl.htm"},{id:"16",title:"Vendor Risk Management Framework",category:"Narrative",content:"Comprehensive framework for managing third-party vendor risks in financial institutions.",publicationDate:"2024-02-28",level:"Group",owningBusinessGroup:"Risk Management",region:"US",riskType:"Operational Risk",topic:"Vendor Management",sourceUrl:"https://www.federalreserve.gov/supervisionreg/topics/outsourcing/oversight.htm"},{id:"17",title:"Climate Risk Management Guidance",category:"Guidelines",content:"Emerging guidance on managing climate-related financial risks for large banking organizations.",publicationDate:"2024-12-17",level:"Group",owningBusinessGroup:"Risk Management",region:"US",riskType:"Operational Risk",topic:"Climate Risk",sourceUrl:"https://www.federalreserve.gov/supervisionreg/topics/climate-change.htm"},{id:"18",title:"Digital Banking Security Standards",category:"FAQ",content:"Frequently asked questions about implementing security standards for digital banking platforms and mobile applications.",publicationDate:"2023-11-25",level:"Business Unit",owningBusinessGroup:"Information Technology",region:"US",riskType:"Cyber Risk",topic:"Digital Banking",sourceUrl:"https://www.ffiec.gov/press/PDF/FFIEC%20Authentication%20Guidance.pdf"}],generateSuggestedPrompts=e=>{if(0===e.length)return["What is FRY?","Explain Basel III capital requirements","What are CCAR stress testing requirements?","How does the CECL methodology work?","What is the purpose of Call Reports?"];let t=[],s=new Set(e.map(e=>e.topic).filter(Boolean));e.map(e=>e.category);let n=new Set(e.map(e=>e.riskType).filter(Boolean));return e.forEach(e=>{e.title.includes("FRY")&&t.push("What is FRY and what are the differences between FRY-9C and FRY-4?"),e.title.includes("Basel III")&&t.push("What are the key Basel III capital ratio requirements?"),(e.title.includes("CCAR")||e.title.includes("DFAST"))&&t.push("How do CCAR and DFAST stress tests differ?"),e.title.includes("CECL")&&t.push("How should banks implement CECL methodology?"),e.title.includes("Regulation YY")&&t.push("What are the enhanced prudential standards under Regulation YY?"),e.title.includes("Model Risk")&&t.push("What are the key components of model risk management?"),e.title.includes("Cybersecurity")&&t.push("What are the FFIEC cybersecurity assessment requirements?"),e.title.includes("Call Report")&&t.push("What are the key Call Report filing requirements for banks?"),e.title.includes("AML")&&t.push("What are the essential components of an AML program?"),e.title.includes("CRA")&&t.push("How are banks evaluated under the Community Reinvestment Act?")}),s.has("Financial Reporting")&&t.push("What are the key financial reporting requirements for bank holding companies?"),s.has("Basel III Compliance")&&t.push("How do banks ensure compliance with Basel III requirements?"),n.has("Compliance Risk")&&t.push("What are the main compliance risks banks need to manage?"),Array.from(new Set(t)).slice(0,5)};var pages=()=>{let[e,t]=(0,a.useState)(G),[s,i]=(0,a.useState)([]),[r,l]=(0,a.useState)(!0),[o,c]=(0,a.useState)({publicationDate:null,documentType:[],level:[],owningBusinessGroup:[],region:[],riskType:[],topic:[],controlProcedure:null,policyCategory:null,policySubCategory:null,controlCategory:null,controlSubCategory:null});return(0,n.jsx)(Layout,{children:(0,n.jsx)("div",{className:"container mx-auto p-6",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[(0,n.jsx)("div",{className:"lg:col-span-4",children:(0,n.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:["                ",(0,n.jsx)(FilterPanel,{filters:o,onFilterChange:e=>{c(t=>({...t,...e}))},onClearFilter:e=>{c(t=>({...t,[e]:null}))},onClearAllFilters:()=>{c({publicationDate:null,documentType:[],level:[],owningBusinessGroup:[],region:[],riskType:[],topic:[],controlProcedure:null,policyCategory:null,policySubCategory:null,controlCategory:null,controlSubCategory:null})}})]})}),(0,n.jsxs)("div",{className:"lg:col-span-8 space-y-8",children:[(0,n.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:["                ",(0,n.jsx)(ChatAssistant,{selectedDocuments:s,isExpanded:r,onToggleExpand:()=>l(!r),suggestedPrompts:generateSuggestedPrompts(s)})]}),(0,n.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:["                ",(0,n.jsx)(DocumentList,{documents:e,selectedDocuments:s,onSelectDocument:e=>{i(t=>{let s=t.some(t=>t.id===e.id);return s?t.filter(t=>t.id!==e.id):[...t,e]})},filters:o})]})]})]})})})}}},function(e){e.O(0,[945,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);